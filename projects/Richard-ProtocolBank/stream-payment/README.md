# Stream Payment - ç‚¹å¯¹ç‚¹æ”¯ä»˜å¯è§†åŒ–ç³»ç»Ÿ

<div align="center">

![Stream Payment](https://img.shields.io/badge/Ethereum-Sepolia-blue)
![Solidity](https://img.shields.io/badge/Solidity-0.8.20-green)
![Next.js](https://img.shields.io/badge/Next.js-14-black)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)
![License](https://img.shields.io/badge/License-MIT-yellow)

**åŸºäºä»¥å¤ªåŠçš„ä¼ä¸šçº§ç‚¹å¯¹ç‚¹æ”¯ä»˜å¯è§†åŒ–ç³»ç»Ÿ**

[åœ¨çº¿æ¼”ç¤º](https://stream-payment.example.com) Â· [éƒ¨ç½²æ–‡æ¡£](./DEPLOYMENT.md) Â· [æŠ¥å‘Šé—®é¢˜](https://github.com/protocolbank/stream-payment/issues)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Stream Payment æ˜¯ä¸€ä¸ªåˆ›æ–°çš„åŒºå—é“¾æ”¯ä»˜å¯è§†åŒ–ç³»ç»Ÿ,é€šè¿‡äº¤äº’å¼åŠ›å¯¼å‘å›¾å®æ—¶å±•ç¤ºä¼ä¸šä¸»é’±åŒ…åˆ°ä¾›åº”å•†çš„èµ„é‡‘æµå‘ã€‚ç³»ç»Ÿç»“åˆæ™ºèƒ½åˆçº¦ã€ç°ä»£WebæŠ€æœ¯å’Œæ•°æ®å¯è§†åŒ–,ä¸ºä¼ä¸šæä¾›é€æ˜ã€ç›´è§‚çš„æ”¯ä»˜ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¨ **äº¤äº’å¼å¯è§†åŒ–** - D3.jsåŠ›å¯¼å‘å›¾å®æ—¶å±•ç¤ºæ”¯ä»˜ç½‘ç»œ
- â›“ï¸ **åŒºå—é“¾é›†æˆ** - åŸºäºä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„å»ä¸­å¿ƒåŒ–æ”¯ä»˜
- ğŸ“Š **å®æ—¶ç»Ÿè®¡** - æ”¯ä»˜æ¬¡æ•°ã€æ€»é‡‘é¢ã€ä¾›åº”å•†æ•°é‡ç­‰å…³é”®æŒ‡æ ‡
- ğŸ‘¥ **ä¾›åº”å•†ç®¡ç†** - å®Œæ•´çš„ä¾›åº”å•†ä¿¡æ¯å’Œæ”¯ä»˜å†å²è¿½è¸ª
- ğŸ” **äº¤æ˜“è¯¦æƒ…** - å¯æ’åºã€å¯ç­›é€‰çš„æ”¯ä»˜è®°å½•è¡¨æ ¼
- ğŸ” **å®‰å…¨å¯é ** - MetaMaské’±åŒ…é›†æˆ,é“¾ä¸Šæ•°æ®ä¸å¯ç¯¡æ”¹
- ğŸ“± **å“åº”å¼è®¾è®¡** - é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

## ğŸ¯ åŠŸèƒ½å±•ç¤º

### 1. æ”¯ä»˜ç½‘ç»œå¯è§†åŒ–

é€šè¿‡åŠ›å¯¼å‘å›¾ç›´è§‚å±•ç¤º:
- **ä¸»é’±åŒ…**(ç»¿è‰²å¤§åœ†) - ä¼ä¸šä¸»è´¦æˆ·
- **ä¾›åº”å•†èŠ‚ç‚¹**(è“è‰²å°åœ†) - å„ä¸ªä¾›åº”å•†
- **èµ„é‡‘æµå‘**(è¿æ¥çº¿) - æ”¯ä»˜å…³ç³»å’Œé‡‘é¢

èŠ‚ç‚¹å¤§å°å’Œè¿æ¥ç²—ç»†åæ˜ æ”¯ä»˜é‡‘é¢,æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ã€‚

### 2. ç»Ÿè®¡é¢æ¿

å®æ—¶æ˜¾ç¤ºå…³é”®æŒ‡æ ‡:
- æ€»æ”¯ä»˜æ¬¡æ•°
- æ€»æ”¯ä»˜é‡‘é¢ (ETH)
- æ´»è·ƒä¾›åº”å•†æ•°é‡
- å¹³å‡æ”¯ä»˜é‡‘é¢

### 3. ä¾›åº”å•†åˆ—è¡¨

å±•ç¤ºæ‰€æœ‰ä¾›åº”å•†çš„:
- åç§°å’Œå“ç‰Œ
- é’±åŒ…åœ°å€
- ç´¯è®¡æ”¶æ¬¾é‡‘é¢
- æ”¯ä»˜æ¬¡æ•°
- åˆ©æ¶¦ç‡
- å æ¯”è¿›åº¦æ¡

### 4. æ”¯ä»˜è¯¦æƒ…è¡¨æ ¼

å®Œæ•´çš„äº¤æ˜“è®°å½•,åŒ…å«:
- ä¾›åº”å•†ä¿¡æ¯
- æ”¯ä»˜é‡‘é¢
- ç±»åˆ«æ ‡ç­¾
- äº¤æ˜“çŠ¶æ€
- æ—¶é—´æˆ³
- Etherscané“¾æ¥

æ”¯æŒæŒ‰é‡‘é¢ã€çŠ¶æ€ã€æ—¶é—´æ’åº,æŒ‰ç±»åˆ«ç­›é€‰ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ™ºèƒ½åˆçº¦å±‚

```
StreamPayment.sol
â”œâ”€â”€ ä¾›åº”å•†æ³¨å†Œä¸ç®¡ç†
â”œâ”€â”€ æ”¯ä»˜åˆ›å»ºä¸æ‰§è¡Œ
â”œâ”€â”€ äº‹ä»¶æ—¥å¿—è®°å½•
â””â”€â”€ æ•°æ®æŸ¥è¯¢æ¥å£
```

**æŠ€æœ¯æ ˆ**:
- Solidity 0.8.20
- OpenZeppelin Contracts
- Hardhat å¼€å‘æ¡†æ¶

### åç«¯æœåŠ¡å±‚

```
Server
â”œâ”€â”€ tRPC API (ç±»å‹å®‰å…¨çš„RPC)
â”œâ”€â”€ Drizzle ORM (æ•°æ®åº“è®¿é—®)
â”œâ”€â”€ MySQL/TiDB (æ•°æ®å­˜å‚¨)
â””â”€â”€ Express (HTTPæœåŠ¡å™¨)
```

**æ ¸å¿ƒåŠŸèƒ½**:
- é“¾ä¸Šæ•°æ®åŒæ­¥
- ç»Ÿè®¡æ•°æ®è®¡ç®—
- å¯è§†åŒ–æ•°æ®ç”Ÿæˆ
- ç”¨æˆ·è®¤è¯ç®¡ç†

### å‰ç«¯åº”ç”¨å±‚

```
Client
â”œâ”€â”€ Next.js (Reactæ¡†æ¶)
â”œâ”€â”€ TypeScript (ç±»å‹å®‰å…¨)
â”œâ”€â”€ Wagmi + RainbowKit (Web3é›†æˆ)
â”œâ”€â”€ D3.js (æ•°æ®å¯è§†åŒ–)
â”œâ”€â”€ TailwindCSS (æ ·å¼)
â””â”€â”€ shadcn/ui (ç»„ä»¶åº“)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18
- pnpm >= 8
- MetaMaské’±åŒ…
- Sepoliaæµ‹è¯•ç½‘ETH

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/protocolbank/stream-payment.git
cd stream-payment

# å®‰è£…ä¾èµ–
pnpm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥å¿…è¦é…ç½®

# æ¨é€æ•°æ®åº“schema
pnpm db:push

# ç”Ÿæˆæµ‹è¯•æ•°æ® (å¯é€‰)
npx tsx scripts/seed-data.ts
```

### å¼€å‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# è®¿é—® http://localhost:3000
```

### éƒ¨ç½²æ™ºèƒ½åˆçº¦

```bash
# ç¼–è¯‘åˆçº¦
npx hardhat compile

# éƒ¨ç½²åˆ°Sepoliaæµ‹è¯•ç½‘
npx hardhat run scripts/deploy.js --network sepolia

# æ›´æ–° .env ä¸­çš„ VITE_CONTRACT_ADDRESS
```

è¯¦ç»†éƒ¨ç½²æ­¥éª¤è¯·å‚è€ƒ [DEPLOYMENT.md](./DEPLOYMENT.md)

## ğŸ“ é¡¹ç›®ç»“æ„

```
stream-payment/
â”œâ”€â”€ contracts/              # Solidityæ™ºèƒ½åˆçº¦
â”‚   â””â”€â”€ StreamPayment.sol
â”œâ”€â”€ scripts/                # éƒ¨ç½²å’Œå·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ deploy.js
â”‚   â””â”€â”€ seed-data.ts
â”œâ”€â”€ client/                 # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ visualization/  # å¯è§†åŒ–ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ dashboard/      # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ hooks/          # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â””â”€â”€ lib/            # å·¥å…·åº“
â”‚   â””â”€â”€ public/             # é™æ€èµ„æº
â”œâ”€â”€ server/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ routers.ts          # tRPCè·¯ç”±
â”‚   â”œâ”€â”€ db.ts               # æ•°æ®åº“æŸ¥è¯¢
â”‚   â””â”€â”€ _core/              # æ ¸å¿ƒåŠŸèƒ½
â”œâ”€â”€ drizzle/                # æ•°æ®åº“Schema
â”‚   â””â”€â”€ schema.ts
â”œâ”€â”€ hardhat.config.cjs      # Hardhaté…ç½®
â””â”€â”€ package.json
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶:

```env
# æ•°æ®åº“
DATABASE_URL=mysql://user:password@host:port/database

# ä»¥å¤ªåŠ
VITE_CONTRACT_ADDRESS=0x...
VITE_SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/...
SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/...
PRIVATE_KEY=your_private_key

# WalletConnect
VITE_WALLETCONNECT_PROJECT_ID=your_project_id

# Etherscan
ETHERSCAN_API_KEY=your_api_key

# åº”ç”¨é…ç½®
VITE_APP_TITLE=Stream Payment
VITE_APP_LOGO=/logo.svg
```

## ğŸ“Š æ•°æ®åº“Schema

### suppliers (ä¾›åº”å•†è¡¨)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | int | ä¸»é”® |
| address | varchar | é’±åŒ…åœ°å€ |
| name | varchar | ä¾›åº”å•†åç§° |
| brand | varchar | å“ç‰Œåç§° |
| category | varchar | ä¸šåŠ¡ç±»åˆ« |
| profitMargin | int | åˆ©æ¶¦ç‡(åŸºç‚¹) |
| totalReceived | varchar | ç´¯è®¡æ”¶æ¬¾ |
| isActive | boolean | æ˜¯å¦æ´»è·ƒ |

### payments (æ”¯ä»˜è¡¨)

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | int | ä¸»é”® |
| paymentId | varchar | æ”¯ä»˜ID |
| fromAddress | varchar | ä»˜æ¬¾åœ°å€ |
| toAddress | varchar | æ”¶æ¬¾åœ°å€ |
| amount | varchar | é‡‘é¢(wei) |
| category | varchar | ç±»åˆ« |
| status | enum | çŠ¶æ€ |
| txHash | varchar | äº¤æ˜“å“ˆå¸Œ |
| timestamp | datetime | æ—¶é—´æˆ³ |

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ™ºèƒ½åˆçº¦**: ç¼–è¾‘ `contracts/StreamPayment.sol`
2. **æ•°æ®åº“**: æ›´æ–° `drizzle/schema.ts` å¹¶è¿è¡Œ `pnpm db:push`
3. **åç«¯API**: åœ¨ `server/routers.ts` æ·»åŠ tRPCè·¯ç”±
4. **å‰ç«¯**: åˆ›å»ºç»„ä»¶å¹¶åœ¨ `client/src/pages/` ä¸­ä½¿ç”¨

### æµ‹è¯•

```bash
# è¿è¡ŒHardhatæµ‹è¯•
npx hardhat test

# æ£€æŸ¥TypeScriptç±»å‹
pnpm type-check

# ä»£ç æ ¼å¼åŒ–
pnpm format
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç !è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- **Sepolia Etherscan**: https://sepolia.etherscan.io
- **Ethereumå®˜ç½‘**: https://ethereum.org
- **Hardhatæ–‡æ¡£**: https://hardhat.org
- **Next.jsæ–‡æ¡£**: https://nextjs.org
- **D3.jsæ–‡æ¡£**: https://d3js.org

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®,è¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»:

- æäº¤ [GitHub Issue](https://github.com/protocolbank/stream-payment/issues)
- å‘é€é‚®ä»¶è‡³: support@example.com

---

<div align="center">

**Built with â¤ï¸ using Ethereum & Modern Web Technologies**

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©,è¯·ç»™ä¸ªStar!

</div>

