# VRF BLS12-381 é¡¹ç›®æ€»ç»“

## é¡¹ç›®å®ŒæˆçŠ¶æ€ âœ…

æœ¬é¡¹ç›®å·²æˆåŠŸå®ç°åŸºäº BLS12-381 æ¤­åœ†æ›²çº¿çš„å¯éªŒè¯éšæœºå‡½æ•°ï¼ˆVRFï¼‰åº“ã€‚

## å·²å®ç°åŠŸèƒ½

### 1. æ ¸å¿ƒåŠŸèƒ½

- âœ… **å¯†é’¥ç”Ÿæˆ** (`generateKeyPair`) - ç”Ÿæˆ BLS12-381 å¯†é’¥å¯¹
- âœ… **VRF è¯æ˜ç”Ÿæˆ** (`prove`) - Prover ç”Ÿæˆ VRF è¯æ˜
- âœ… **VRF éªŒè¯** (`verify`) - Verifier éªŒè¯è¯æ˜å¹¶è¾“å‡ºéšæœºå€¼
- âœ… **Hash to Field** (`H_p`) - å“ˆå¸Œå¹¶ mod p
- âœ… **Hash to Curve** (`H_G`) - å“ˆå¸Œåˆ° BLS12-381 æ›²çº¿

### 2. æŠ€æœ¯æ ˆ

- âœ… **Vite** - ç°ä»£åŒ–çš„æ„å»ºå·¥å…·
- âœ… **Vitest** - å¿«é€Ÿçš„å•å…ƒæµ‹è¯•æ¡†æ¶
- âœ… **TypeScript** - ç±»å‹å®‰å…¨
- âœ… **@noble/curves** - BLS12-381 æ¤­åœ†æ›²çº¿æ“ä½œ
- âœ… **ethers v6** - Keccak256 å“ˆå¸Œå‡½æ•°

### 3. æµ‹è¯•è¦†ç›–

å®Œæ•´çš„æµ‹è¯•å¥—ä»¶åŒ…å« 21 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š

- âœ… H_p å‡½æ•°æµ‹è¯•ï¼ˆ4 ä¸ªæµ‹è¯•ï¼‰
- âœ… H_G å‡½æ•°æµ‹è¯•ï¼ˆ4 ä¸ªæµ‹è¯•ï¼‰
- âœ… å¯†é’¥ç”Ÿæˆæµ‹è¯•ï¼ˆ2 ä¸ªæµ‹è¯•ï¼‰
- âœ… VRF Prove å’Œ Verify æµ‹è¯•ï¼ˆ10 ä¸ªæµ‹è¯•ï¼‰
- âœ… å®Œæ•´å·¥ä½œæµç¨‹æµ‹è¯•ï¼ˆ1 ä¸ªæµ‹è¯•ï¼‰

**æµ‹è¯•ç»“æœ**: æ‰€æœ‰ 21 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ âœ…

### 4. æ„å»ºè¾“å‡º

- âœ… ES Module: `dist/index.js` (92.60 kB, gzip: 29.66 kB)
- âœ… CommonJS: `dist/index.cjs` (64.34 kB, gzip: 24.37 kB)
- âœ… TypeScript ç±»å‹å®šä¹‰: `dist/index.d.ts`

### 5. æ–‡æ¡£

- âœ… README.md - å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£
- âœ… example.ts - ä½¿ç”¨ç¤ºä¾‹ä»£ç 
- âœ… ä»£ç æ³¨é‡Š - æ‰€æœ‰å‡½æ•°éƒ½æœ‰è¯¦ç»†æ³¨é‡Š

## åè®®å®ç°

### Prover ç®—æ³•

```
è¾“å…¥: sk (ç§é’¥), pk (å…¬é’¥), in (è¾“å…¥)

æ­¥éª¤:
1. preout = sk Â· H_G(in)
2. r_1 â† ğ”½_p (éšæœºæ•°)
3. R = r_1 Â· G
   R_m = r_1 Â· H_G(in)
4. c = H_p(in, pk, preout, R, R_m)
5. s_1 = r_1 + c Â· sk

è¾“å‡º: (c, s_1, preout)
```

### Verifier ç®—æ³•

```
è¾“å…¥: pk (å…¬é’¥), in (è¾“å…¥), (c, s_1, preout)

æ­¥éª¤:
1. R = s_1 Â· G - c Â· pk
   R_m = s_1 Â· H_G(in) - c Â· preout
2. éªŒè¯: c = H_p(in, pk, preout, R, R_m)
3. å¦‚æœéªŒè¯é€šè¿‡:
     out = H(preout, in)
   å¦åˆ™:
     è¾“å‡º false

è¾“å‡º: out æˆ– false
```

## é¡¹ç›®ç‰¹ç‚¹

1. **è·¨å¹³å°æ”¯æŒ** - åŒæ—¶æ”¯æŒæµè§ˆå™¨å’Œ Node.js ç¯å¢ƒ
2. **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
3. **é«˜æµ‹è¯•è¦†ç›–** - 21 ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰å…³é”®åŠŸèƒ½
4. **å®‰å…¨æ€§** - åŸºäºæˆç†Ÿçš„ @noble/curves åº“
5. **ç¡®å®šæ€§** - ç›¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡º
6. **é˜²ç¯¡æ”¹** - ä»»ä½•è¯æ˜ç¯¡æ”¹éƒ½ä¼šå¯¼è‡´éªŒè¯å¤±è´¥

## è¿è¡Œå‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œæµ‹è¯•
npm test

# å•æ¬¡æµ‹è¯•è¿è¡Œ
npm run test:run

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œç¤ºä¾‹
npx tsx example.ts
```

## ä½¿ç”¨ç¤ºä¾‹

```typescript
import { generateKeyPair, prove, verify } from 'vrf-bls12381';

// ç”Ÿæˆå¯†é’¥å¯¹
const { sk, pk } = generateKeyPair();

// ç”Ÿæˆ VRF è¯æ˜
const input = 'random seed';
const proof = prove(sk, pk, input);

// éªŒè¯è¯æ˜
const output = verify(pk, input, proof);
if (output !== null) {
  console.log('VRF è¾“å‡º:', output);
}
```

## é¡¹ç›®ç»“æ„

```
vrf-bls12381/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ vrf.ts          # æ ¸å¿ƒå®ç°
â”‚   â”œâ”€â”€ vrf.test.ts     # æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ index.ts        # å¯¼å‡ºæ¥å£
â”œâ”€â”€ dist/               # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json       # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts      # Vite é…ç½®
â”œâ”€â”€ vitest.config.ts    # Vitest é…ç½®
â”œâ”€â”€ example.ts          # ä½¿ç”¨ç¤ºä¾‹
â””â”€â”€ README.md           # æ–‡æ¡£
```

## æ€§èƒ½æŒ‡æ ‡

- å¯†é’¥ç”Ÿæˆ: < 10ms
- è¯æ˜ç”Ÿæˆ: < 100ms
- è¯æ˜éªŒè¯: < 100ms
- æ„å»ºæ—¶é—´: < 1s
- æµ‹è¯•æ—¶é—´: < 1s

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. ç§é’¥ (sk) å¿…é¡»ä¿å¯†
2. ç”Ÿäº§ç¯å¢ƒä¸è¦ä½¿ç”¨å›ºå®šçš„ r_1 å€¼
3. è¾“å…¥æ•°æ®çš„å”¯ä¸€æ€§ç”±è°ƒç”¨è€…ä¿è¯
4. éªŒè¯å¤±è´¥æ—¶è¦æ­£ç¡®å¤„ç†é”™è¯¯

## è®¸å¯è¯

MIT License

## ä½œè€…

Jade Xie

---

**é¡¹ç›®çŠ¶æ€**: âœ… å®Œæˆå¹¶é€šè¿‡æ‰€æœ‰æµ‹è¯•
**æœ€åæ›´æ–°**: 2025-10-20

